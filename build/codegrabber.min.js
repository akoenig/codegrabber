/* 
 * codegrabber (v0.2.0)
 * 
 * Copyright(c) 2014 André König <andre.koenig@posteo.de>
 * MIT Licensed 
 * 
 */
"use strict";var codegrabber=codegrabber||{};codegrabber.name="codegrabber",codegrabber.version="0.2.0",codegrabber.author="André König <andre.koenig@posteo.de>",codegrabber.Burnisher=function(){function e(){}return e.prototype.$$normalizeLineRange=function(e){return e=(e||"").split("-"),2!==e.length||(e[0]=Number(e[0]),e[1]=Number(e[1]),isNaN(e[0])||e[0]<0||isNaN(e[1])||e[1]<0)?void 0:e},e.prototype.slice=function(e,r){var n="\n",t=e.split(n);return(r=this.$$normalizeLineRange(r))?e=t.splice(r[0]-1,r[1]).join(n):t.join(n)},{create:function(){return new e}}}(),codegrabber.HTTP=function(){function e(){}return e.prototype.get=function(e,r){var n=new XMLHttpRequest,t="GET";n.onreadystatechange=function(){4===n.readyState&&r(null,n.responseText)},n.open(t,e),n.send()},new e}(),codegrabber.Hooks=function(){function e(e){return e=e||{},e.name?"function"!=typeof e.run?console.error("%s: The hook '%s' needs a valid 'run' function. Skipping this hook.",codegrabber.name,e.name):void t.push(e):console.error("%s: Please define a name for your hook.",codegrabber.name)}function r(){t=[]}function n(e){var r,n=0,o=0;if(t.length)for(r=t.length,n;r>n;n+=1)t[n].run(e),o+=1;return o}var t=[];return{register:e,clear:r,$$run:n}}(),codegrabber.Snippet=function(){function e(e){var n=this;this.uri=e.uri,this.lines=e.lines,this.$pre=e.pre,this.$code=document.createElement("code"),this.$pre.appendChild(this.$code),r.get(this.uri,function(e,r){return e?console.log("%s: Fetching remote source file failed",codegrabber.name):(r=n.$$polish(r),r=document.createTextNode(r),n.$code.appendChild(r),void t.$$run(n.$pre))})}var r=codegrabber.HTTP,n=codegrabber.Burnisher,t=codegrabber.Hooks;return e.prototype.$$polish=function(e){var r=n.create();return this.lines&&(e=r.slice(e,this.lines)),e},{create:function(r){return r=r||{},new e(r)}}}(),function(){var e=codegrabber.Snippet,r=document.querySelectorAll("pre");[].forEach.call(r,function(r){var n=r.getAttribute("data-src");n&&e.create({pre:r,uri:n,lines:r.getAttribute("data-lines")})})}();