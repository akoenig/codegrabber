/* 
 * codegrabber (v0.2.0-alpha)
 * 
 * Copyright(c) 2014 André König <andre.koenig@posteo.de>
 * MIT Licensed 
 * 
 */
"use strict";var akoenig=akoenig||{};akoenig.codegrabber=akoenig.codegrabber||{},akoenig.codegrabber.Burnisher=function(){function e(){}return e.prototype.$$normalizeLineRange=function(e){return e=(e||"").split("-"),2!==e.length||(e[0]=Number(e[0]),e[1]=Number(e[1]),isNaN(e[0])||e[0]<0||isNaN(e[1])||e[1]<0)?void 0:e},e.prototype.slice=function(e,t){var n="\n",r=e.split(n);return(t=this.$$normalizeLineRange(t))?e=r.splice(t[0]-1,t[1]).join(n):r.join(n)},{create:function(){return new e}}}(),akoenig.codegrabber.HTTP=function(){function e(){}return e.prototype.get=function(e,t){var n=new XMLHttpRequest,r="GET";n.onreadystatechange=function(){4===n.readyState&&t(null,n.responseText)},n.open(r,e),n.send()},new e}(),akoenig.codegrabber.Snippet=function(){function e(e){this.uri=e.uri,this.lines=e.lines,this.$pre=e.pre,this.$code=document.createElement("code"),this.$pre.appendChild(this.$code),this.$$fetch()}{var t=akoenig.codegrabber.HTTP,n=akoenig.codegrabber.Burnisher;akoenig.codegrabber.Highlighters}return e.prototype.$$polish=function(e){var t=n.create();return this.lines&&(e=t.slice(e,this.lines)),e},e.prototype.$$highlight=function(){var e=akoenig.codegrabber.Plugins.highlighters,t=e[Object.keys(e)[0]];t&&t(this.$pre)},e.prototype.$$fetch=function(){function e(e,t){return e?console.error(e):(t=n.$$polish(t),t=document.createTextNode(t),n.$code.appendChild(t),void n.$$highlight())}var n=this;t.get(this.uri,e)},{create:function(t){return t=t||{},new e(t)}}}(),akoenig.codegrabber.Plugins=function(){return{highlighters:{},registerHighlighter:function(e,t){this.highlighters[e]=t}}}(),function(){var e=(akoenig.codegrabber.HTTP,akoenig.codegrabber.Snippet),t=document.querySelectorAll("pre");[].forEach.call(t,function(t){var n,r=t.getAttribute("data-src");r&&(n=e.create({pre:t,uri:r,lines:t.getAttribute("data-lines")}))})}();